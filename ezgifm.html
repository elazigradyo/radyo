<script>
    const audioPlayer = document.getElementById('audio-player');
    const playButton = document.querySelector('.play-btn');
    const pauseButton = document.querySelector('.pause-btn');
    const volumeControl = document.getElementById('volume-control');
    const backgroundPlayToggle = document.getElementById('background-play-toggle');
    let allowBackgroundPlay = false; // Kullanıcı tercihi için bayrak

    // Oynatma düğmesine tıklandığında çalışır
    playButton.addEventListener('click', () => {
        audioPlayer.pause(); // Oynatıcıyı durdur
        audioPlayer.currentTime = 0; // Çalma konumunu sıfırla
        audioPlayer.load(); // Kaynağı yeniden yükle
        audioPlayer.play(); // Güncel yayını başlat
    });

    // Durdurma düğmesine tıklandığında çalışır
    pauseButton.addEventListener('click', () => {
        audioPlayer.pause();
    });

    // Ses kontrolü için sürgü
    volumeControl.addEventListener('input', (event) => {
        audioPlayer.volume = event.target.value; // Ses seviyesini ayarlar
    });

    // Arka planda oynatma tercihini kaydeder
    backgroundPlayToggle.addEventListener('change', (event) => {
        allowBackgroundPlay = event.target.checked;
    });

    // Sayfa görünürlüğü değiştiğinde oynatma kontrolü
    document.addEventListener('visibilitychange', () => {
        if (!allowBackgroundPlay && document.hidden) {
            audioPlayer.pause(); // Sayfa gizliyse oynatmayı durdur
        }
    });

    // Sayfa kapatıldığında oynatmayı sıfırlar
    window.addEventListener('unload', () => {
        if (!allowBackgroundPlay) {
            audioPlayer.pause(); // Oynatmayı durdur
            audioPlayer.currentTime = 0; // Çalma konumunu sıfırla
        }
    });
</script>
